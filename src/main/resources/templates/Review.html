<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" th:href="@{/review.css}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<div id="Main_Body">
    <aside>
        <div>Search for reviews</div>
        <form id="f1" th:action="@{Review/Get/Category}" method="get">
            <label>Game Name: <input type="text" ID="answer"> <button type="button" id="button">Search</button></label>
        </form>
        <div>----------------------------------------------------------</div>
        <form id="f2" th:action="@{Review/Make}" method="post">
            <div>Would You like to Write a review</div>
            <label>Game Name: <input type="text" ID="Game_name"> </label>
            <div></div>
            <label>User Name: <input type="number" ID="User"> </label>
            <div></div>
            <label>Review: <input type="text" ID="Review_name"> </label>
            <div></div>
            <label>rating: <input type="number" ID="Rating"> <button type="button" id="button1">Post</button></label>
        </form>
    </aside>
    <p id="res"></p>

</div>

<script>
    $.ajax({
        url: ("Review/newCategory")+"?Catname="+"World_Of_War",
        type: "post",
        contentType: 'application/json',
        success: function(data){
            $("#res").innerText=data;
            return alert(data);

        }
    });

    $.ajax({
        url: ("Review/newCategory")+"?Catname="+"League_of_Legends",
        type: "post",
        contentType: 'application/json',
        success: function(data){
            $("#res").append(data);
            return alert(data);

        }
    });




    function getFormString() {
        var jsonStr = '';
        jsonStr += '{';
        jsonStr += '"UserID": ';
        jsonStr += $("#User").val() ;
        jsonStr += ',';
        jsonStr +='"Rating": ';
        jsonStr += $("#Rating").val() ;
        jsonStr +=',';
        jsonStr +='"Text_writing": "';
        jsonStr += $("#Review_name").val() ;
        jsonStr += '",';
        jsonStr +='"Game_Title": "';
        jsonStr +=$("#Game_name").val() ;
        jsonStr +='"';
        jsonStr += '}';
        return jsonStr;

    }

    $("#button1").click(function () {
        console.log(getFormString());
        $.ajax({
            url: $("#f2").attr("action")+"?Gamename="+$("#Game_name").val(),
            type: $("#f2").attr("method"),
            data: getFormString(),
            // headers:{"Gamername":$("#Game_name").val()},
            contentType: 'application/json',
            success: function(data){
                return alert(data);

            }
        });

    });

    $("#button").click(function () {

        $.ajax({
            url: $("#f1").attr("action")+"?Catname="+$("#answer").val(),
            type: $("#f1").attr("method"),

            contentType: 'application/json',
            success: function(data){
                alert(JSON.stringify(data));
                $("#res").append(JSON.stringify(data));


            }
        });

    });

</script>
</body>
</html>